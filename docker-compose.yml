version: "3.7"

services:
    redcoat_server:
        depends_on:
            - redcoat_db
        build:
            context: .
        networks:
            - redcoat
        build:
            context: ./server
        environment:
            - PORT=5000
        ports:
            - 5000:5000

    redcoat_client:
        depends_on:
            - redcoat_db
            - redcoat_server
        build:
            context: ./client
        networks:
            - redcoat
        ports:
            - 4000:80

    redcoat_db:
        image: mongo:3.6.11-xenial
        volumes:
            - redcoat_data:/data/db
        ports:
            - "27017:27017"
        networks:
            - redcoat

networks:
    redcoat:

volumes:
    redcoat_data:
