// Apply the appropriate colours to each tag and jstree element.
@for $i from 1 through 12 {
	#sentence-tagging .sentence .word.tag-#{$i}::before {
		background-color: nth($colors, $i);
	}

	#sentence-tagging .sentence .word .label.tag-#{$i} {
		color: darken(nth($colors, $i), 65);
		background-color: lighten(nth($colors, $i), 0);
	}

	//#sentence-tagging .sentence .word .word-inner.tag-#{$i}  { background: lighten(nth($colors, $i), 7) !important; }
	#sentence-tagging .sentence .word .word-inner.tag-#{$i} {
		background: rgba(241, 241, 241, 0);
	}

	#sentence-tagging .sentence .word .label.tag-#{$i} {
		border-color: rgba(
			desaturate(darken(nth($colors, $i), 45), 50),
			0.2
		) !important;
	}

	//#sentence-tagging .sentence .word.tag-#{$i}::before { border: 2px solid nth($colors, $i); }
	#sentence-tagging .sentence .word.selected.tag-#{$i}::before {
		background-color: lighten(nth($colors, $i), 5);
	}
	#sentence-tagging .sentence .word.tag-#{i}.selected.tag::after {
		border-left: 2px solid nth($colors, $i);
	}
	.jstree > ul > li.color-#{$i} {
		border-left: 3px solid nth($colors, $i);
	}
	.jstree li.color-#{$i} a:hover {
		background: nth($colors, $i);
	}
	.jstree li.color-#{$i} a.jstree-clicked {
		background: nth($colors, $i);
	}

	#category-hierarchy-tree:not(.display-only) > ul > li.color-#{$i} {
		border-left: 4px solid darken(nth($colors, $i), 3);
	}
	#category-hierarchy-tree.display-only > ul > li.color-#{$i} {
		border-left: 8px solid darken(nth($colors, $i), 3);
	}

	#category-hierarchy-tree:not(.display-only)
		> ul:not(.dragging)
		> li.color-#{$i}
		.inner-container:hover {
		background: nth($colors, $i);
	}
	#category-hierarchy-tree:not(.display-only)
		> ul:not(.dragging)
		> li.color-#{$i}
		span.category-name:hover {
		background: nth($colors, $i);
	}
	#category-hierarchy-tree:not(.display-only)
		> ul:not(.dragging)
		> li.color-#{$i}
		span.category-name.hotkey-active:after {
		//transition: background-position 0.25s;
		border-color: darken(nth($colors, $i), 26);
		background: nth($colors, $i);
	}
	// #category-hierarchy-tree > ul:not(.dragging) > li.color-#{$i} span.category-name:after {
	// 	background-image: linear-gradient(to bottom, #eee 50%, nth($colors, $i) 50%);
	// }
}

#sentence-tagging .sentence {
	.word-inner {
		height: 55px;
	}
	.noise {
		color: darken(rgba(#36a2eb, 1), 3) !important;
	}

	.noise-label {
		color: #555;
		color: rgba(red, 0.65) !important;

		font-family: $code-font;
	}

	.word {
		margin-bottom: 0;
		//transition: margin 0.3s ease;
	}
	.word.selected:not(.tag) {
		margin-bottom: 1px;
	}

	.word.tag-end {
		margin-right: 4px;
	}
	.word.tag-begin {
		margin-left: 4px;
		//border-top-left-radius: 4px;
		//overflow: hidden;
		&:first-child {
			margin-left: 0;
		}
	}
	.word.tag-end {
		//border-top-right-radius: 4px;
		overflow: hidden;
	}
	.word.tag-end + .word.tag-begin {
		margin-left: 0;
	}
}

// #sentence-tagging .sentence .word {
// 	display: inline-flex !important;
// 	flex-direction:column-reverse;
// }

body.tagging-interface-body {
	background: #eee;
}
#annotation-complete {
	padding-top: 100px;
	padding-left: 50px;
	padding-right: 50px;
	display: none;
	p {
		line-height: 200%;
	}
	&.show {
		display: block;
	}
	a {
		color: $primary-blue;
	}
}

// #submit-annotations {
// 	cursor: pointer;
// }

// #submit-annotations:hover {
// 	border: 2px solid $primary-orange;
// }

#tagging-container {
	width: 80%;
	max-width: 100%;
	min-height: 25vh;
	margin-left: 370px;
	background: #e9e9e9;
	margin-bottom: 200px;
}
#sentence-tagging {
	margin-top: $navbar-height * 2;
	//margin-bottom: 300px;
	min-height: 69vh;
}
#sentence-tagging,
#ending-message {
	font-size: 24px;
	color: #333;
}
#sentence-tagging .sentence {
	line-height: 220%;
}

body.taking-screenshot .save-to-png {
	display: none !important;
	.word-inner.highlighted,
	.word.selected,
	.word-inner:active {
		background: none !important;
	}
}

#pagination {
	display: flex;
	width: calc(100% - 370px);
	justify-content: center;
	align-items: center;

	position: fixed;

	top: $navbar-height + 4px;
	left: 370px;
	background: #fefefe;
	padding: 5px 5px;
	z-index: 991;
	box-sizing: border-box;
	height: $navbar-height;
	font-size: 0.7em;
	user-select: none;

	box-shadow: 1px 1px 4px -3px rgba(0, 0, 0, 0.9);

	&:before {
		// Hides the box shadow from the left panel
		position: absolute;
		top: 0;
		left: -3px;
		width: 4px;
		height: 100%;
		background: #fefefe;
		content: " ";
	}

	.group-last-modified {
		display: block;
		color: #777;
		font-size: 0.9em;
		width: fit-content;
		min-width: 220px;
		text-align: right;
		padding-right: 20px;
	}
	.filler-left {
		min-width: 220px;
	}
	.highlight-oov-container {
		min-width: 140px;
		font-size: 12px;
		margin-left: -30px;
		display: flex;
		flex-align: center;
		align-items: center;
		input {
			display: none;
		}
		label {
			border: 2px solid #ddd;
			margin-right: 7px;
			width: 20px;
			height: 20px;
			cursor: pointer;
			border-radius: 4px;
			position: relative;
		}
		input:checked + label {
			&:after {
				font-family: FontAwesome;
				content: "\f00c";
				position: absolute;
				top: 0;
				left: 0;
				color: #222;
				font-size: 16px;
				text-align: center;
				width: 100%;
				height: 100%;
				vertical-align: middle;
				pointer-events: none;
				line-height: 16px;
				margin-top: 1px;
			}
		}
	}

	.docs-per-page-select-container {
		display: flex;
		justify-content: center;
		align-items: center;
		flex-direction: row;
		label {
			word-wrap: nowrap;
			display: block;
			font-size: 14px;
			min-width: 70px;
		}
		select {
			width: 60px;
			padding: 3px 5px;
			&.sort-by {
				width: 170px;
			}
		}
	}

	input,
	select {
		border-radius: 4px;
		font-size: 15px;
		padding: 5px 15px;
		padding-top: 4px;
		line-height: inherit;
		box-sizing: border-box;
		outline: none;
		&:focus,
		&:active {
			border: 2px solid $button-blue;
		}
		&.error {
			border-color: $primary-red;
		}
		// &:-webkit-autofill, &:-webkit-autofill:focus,  {
		// 	font-family: $primary-font;
		// 	font-size: 15px;
		// }
	}

	input.search-bar {
		padding-left: 12px;
		padding-right: 12px;
		width: 140px;
	}

	.search-container.active > * {
		background: rgba($button-blue, 0.15);
		border-color: rgba($button-blue, 0.3);
		&:hover {
			border-color: $button-blue;
		}
	}
	.search-container.active > .search-button {
		background: rgba($button-blue, 0.03);
	}

	.search-container {
		display: flex;
		&:focus {
			.search-container {
				border-color: $button-blue;
			}
		}
		.search-bar {
			margin-right: 0;
			border-top-right-radius: 0;
			border-bottom-right-radius: 0;
		}
		.search-button {
			border-left: none;
			padding: 0px 15px;
			margin-left: 0;
			border-top-right-radius: 4px;
			border-bottom-right-radius: 4px;
			width: 36px;
			padding: 0;
			font-size: 16px;
			transition: none;
			cursor: pointer;
			&:hover {
				background: lighten($button-blue, 10);
				color: white;
				border-color: lighten($button-blue, 10);
			}
			&:active,
			&:focus {
				outline: none !important;
			}
			&:active {
				transform: translate(0px, 1px);
			}
		}
	}

	.current-page-container {
		font-size: 15px;
		position: relative;
		min-width: 300px;
		display: flex;
		flex-direction: row;
		align-items: center;
		justify-content: center;
		transition: padding-bottom 0.3s ease;
		&.progress-bar-underneath {
			padding-bottom: 15px;
		}

		.docs-per-page-select-container {
			margin-left: 30px;
		}
		span.group-name {
			display: block;
			font-size: 14px;

			form {
				display: inline;
			}

			input.page-input {
				width: 50px;
				margin: 0 4px;
				text-align: center;
				padding-left: 2px;
				padding-right: 2px;
			}
		}
	}

	.page-button-container {
		height: 100%;
		align-items: center;
		display: flex;
		padding: 0 10px;
		box-sizing: border-box;
		button.save-button {
			position: relative;
			margin-right: 10px;
			background: $button-blue;
			color: white;
			min-width: 110px;
			padding: 5px 10px;
			//padding-right: 40px;
			overflow: hidden;
			i {
				margin-right: 10px;
			}
			margin-right: -5px;
			&:hover {
				background: lighten($button-blue, 10);
				.save-and-next {
					color: rgba(255, 255, 255, 0);
				}
			}
			&.disabled {
				opacity: 0.2;
			}
			&.recently-saved {
				background: $primary-green;
				&:hover {
					background: lighten(
						$primary-green,
						10
					); // IDK why you would want to click this again but ok
				}
			}
			&.saving {
				pointer-events: none;
				background: #ccc;
			}
			.save-and-next {
				background: lighten($button-blue, 10);
				position: absolute;
				top: 0;
				right: 0;
				height: 100%;
				width: 30px;
				text-align: center;
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 0;
				box-sizing: border-box;
				transition: padding 0.2s ease;
				border-left: 2px solid #f2f2f2;

				i {
					margin: 0;
				}
				&:hover {
					background: lighten($button-blue, 25);
					padding-left: 5px;
					color: white;
				}
			}
		}
		button {
			min-width: 100px;

			font-size: 1em;
			padding: 5px 15px;
			width: 100%;
			margin: 0;
			line-height: inherit;
			border-radius: 3px;
			cursor: pointer;
			border: 0px solid #ddd;
			background: #e3e3e3;
			//box-shadow: 1px 1px 4px -3px rgba(0, 0, 0, 0.9);

			&.disabled {
				pointer-events: none;
				opacity: 0.6;
				color: #aaa;
			}
			&:hover {
				background: lighten($button-blue, 10);
				color: white;
			}
			&:active,
			&:focus {
				outline: none !important;
			}
			&:active {
				transform: translate(0px, 1px);
			}
			i {
				font-size: 0.9em;
			}
		}
		&.previous-page {
			i {
				margin-right: 10px;
			}
		}
		&.next-page {
			i {
				margin-left: 10px;
			}
		}
	}
	.current-page-container {
		width: 100%;
		text-align: center;
	}
}

.tagging-complete-page {
	#sentence-tagging {
		min-height: 0px;
		padding: 0;
		margin: 0;
	}
	#pagination {
		.search-container {
			opacity: 0;
			pointer-events: none;
		}
		.docs-per-page-select-container {
			opacity: 0;
			pointer-events: none;
		}
		.group-name {
			opacity: 0;
			pointer-events: none;
		}
		.page-button-container .save-button {
			opacity: 0 !important;
			pointer-events: none;
		}
		.page-button-container.next-page {
			opacity: 0;
			pointer-events: none;
		}
		.group-last-modified {
			opacity: 0;
			pointer-events: none;
		}
	}
	.tokens-info {
		display: none;
	}
	#category-hierarchy-tree {
		overflow-y: hidden;
	}
	.document-container.header {
		display: none;
	}
}
#tagging-complete-message {
	width: 100%;
	height: calc(100vh);
	text-align: center;
	display: flex;
	align-items: center;
	justify-content: center;
	background-image: url($base_url + "images/redcoat-1-grey-transparent.png");
	background-repeat: no-repeat;
	background-size: contain;
	background-position: center;
	span.tagging-complete-text {
	}
}

// .submit-annotations-container {
// 	padding: 50px 130px;
// 	display: flex;
// 	justify-content: center;
// 	background: #333;
// 	margin-top: 50px;
// 	box-shadow: inset 0px 2px 5px -3px rgba(0, 0, 0, 0.9);
// 	//background-image: url($base_url + 'images/skewed_print_@2X.png');

// 	.submit-annotations-button {
// 		background: #e2e2e2;
// 		width: 300px;
// 		cursor: pointer;
// 		border: none;
// 		border-radius: 3px;
// 		padding: 40px;
// 		box-shadow: 3px 3px 4px -3px rgba(0, 0, 0, 0.9);
// 		transition: padding 0.2s ease;

// 		i {
// 			margin-left: 5px;
// 			font-size: 0.8em;
// 		}
// 		&:hover {
// 			background: $button-blue;
// 			color: white;
// 			padding-left: 45px;
// 			padding-right: 35px;
// 		}
// 		&:focus {
// 			border: none;
// 		}
// 		&:active {
// 			transform: translate(0, 1px);
// 		}
// 	}
// }

.document-container {
	padding-right: 0px;
	align-items: stretch;
	padding: 10px 130px;

	&.header .sentence {
		padding-top: 90px;
	}
	&.header {
		padding-top: 5px;
		padding-bottom: 5px;
		margin-bottom: -10px;
		background: #e9e9e9;
		font-size: 0.9em;
		.document {
			box-shadow: none;
		}
	}

	$conf_low: #ffcccc;
	$conf_med: #ffff99;
	$conf_high: #ccff99;

	&.conf {
		.document {
			background: rgba(255, 255, 255, 0.6);
		}
	}
	&.conf-low {
		background: rgba(darken($conf_low, 11), 0.2);
	}

	&.conf-medium {
		background: rgba(darken($conf_med, 17), 0.2);
	}
	&.conf-high {
		background: rgba(darken($conf_high, 11), 0.2);
	}

	.document-wrapper {
		box-shadow: 1px 1px 4px -3px rgba(0, 0, 0, 0.9);
	}
	.document {
		display: flex;
		background: #fefefe;

		&.header {
			// Emulates an extra bit of padding at the top
			background: none;
			font-weight: bold;
			font-size: 0.9em;
			text-align: center;

			.sentence {
				padding: 0;
			}
		}

		&.document-underneath {
			background: rgba(255, 255, 255, 0.3);
			transition: background 0.2s ease;

			// &.has-comment {
			// 	background: rgba(lighten($button-blue, 15), 0.45);
			// }
			.confidence-buttons {
				background: none !important;
			}
			&.open {
				box-shadow: inset 0px 1px 3px -3px rgba(0, 0, 0, 0.9);
				background: rgba(0, 0, 0, 0.08);
				.confidence-buttons {
					background: none !important;
				}
			}

			.bottom-buttons {
				display: flex;
				justify-content: flex-end;
				line-height: 100%;
				padding: 5px 0;

				> * {
					font-size: 12px;
					border-radius: 3px;

					user-select: none;

					background: rgba(255, 255, 255, 0.95);
					color: rgba(0, 0, 0, 0.3);
					.inner {
						display: flex;
						align-items: center;
						padding: 5px 7px;
						box-sizing: border-box;
						cursor: pointer;
					}

					&:not(:last-child) {
						margin-right: 6px;
					}
					i {
						font-size: 18px;
					}
				}

				.save-to-png {
					color: rgba(0, 0, 0, 0.7);

					&:active {
						transform: translate(0, 1px);
					}
					&:hover {
						background: $button-blue;
						color: white;
					}
				}
				.open-comments-button {
					&:hover {
						background: $button-blue;
						color: white;
						.inner {
							color: white;
						}
					}
					span.inner {
						&:active {
							transform: translate(0, 1px);
						}
					}

					position: relative;
					line-height: 100%;
					border-radius: 3px;

					&.has-comment {
						color: rgba(0, 0, 0, 0.7);
						background: $button-blue;
						color: white;
						&:hover {
							background: lighten($button-blue, 5);
						}
					}

					i {
						margin-right: 5px;
					}
				}
			}

			.confidence-buttons {
				transition: background 0.2s ease;
			}
			&.open .confidence-buttons {
			}
			.sentence {
				padding: 0px 0;
				padding-right: 10px;
			}
			&.open .comments-wrapper {
				display: block;
			}
			.comments-wrapper {
				display: none;
			}
		}

		// &:nth-child(even) {
		// 	background: #fafafa;
		// 	&.conf-low 		{
		// 		background: rgba(darken($conf_low, 8), 0.2);
		// 		.confidence-buttons {
		// 			background: rgba(darken($conf_low, 8), 0.2);
		// 		}
		// 	}
		// 	&.conf-medium 	{
		// 		background: rgba(darken($conf_med, 8), 0.2);
		// 		.confidence-buttons {
		// 			background: rgba(darken($conf_med, 8), 0.2);
		// 		}
		// 	}
		// 	&.conf-high 	{
		// 		background: rgba(darken($conf_high, 8), 0.2);
		// 		.confidence-buttons {
		// 			background: rgba(darken($conf_high, 8), 0.2);
		// 		}
		// 	}
		// }

		// &:nth-child(even):not(.conf) .confidence-buttons {
		// 	background: #e3e3e3;
		// }

		// &:not(.conf) .confidence-buttons {
		// 	background: #e9e9e9;
		// }

		.sentence {
			width: 100%;
			padding-top: 15px;
			padding-bottom: 15px;
			padding-left: 30px;
			padding-right: 80px;

			position: relative;

			&:hover {
				.save-to-png {
					opacity: 1;
				}
			}
		}
		.sentence-index {
			color: #bbb;
			pointer-events: none;

			text-align: center;

			display: flex;
			align-items: center;
			min-width: 130px;
			//padding-left: 80px;

			.inner {
				padding: 20px 50px;
				font-size: 22px;
				//border-right: 2px solid #ddd;
				line-height: 100%;
				height: 30px;
			}
		}

		&:not(.header) .confidence-buttons {
			background: rgba(0, 0, 0, 0.025);
			background-blend-mode: multiply;
		}

		.confidence-buttons {
			justify-content: center;
			display: flex;
			vertical-align: middle;
			align-items: center;

			min-width: 22%;

			.confidence-button {
				width: 35px;
				height: 35px;
				border: 2px solid #bbb;
				border-radius: 4px;
				display: inline-block;
				background: #f2f2f2;
				cursor: pointer;
				position: relative;

				&:not(:last-child) {
					margin-right: 25px;
					&:before {
						// circles between boxes
						position: absolute;
						top: calc(50% - 3px);
						right: -18px;
						content: " ";
						border: 3px solid #777;
						border-radius: 50%;
					}
				}

				&:active {
					transform: translate(0, 1px);
				}
				&:hover,
				&.checked {
					&.conf-low {
						background: $conf_low;
						border-color: desaturate(darken($conf_low, 60), 40);
						&.checked:after {
							color: desaturate(darken($conf_low, 60), 50);
						}
					}
					&.conf-medium {
						background: $conf_med;
						border-color: darken($conf_med, 50);
						&.checked:after {
							color: darken($conf_med, 70);
						}
					}
					&.conf-high {
						background: $conf_high;
						border-color: darken($conf_high, 50);
						&.checked:after {
							color: darken($conf_high, 70);
						}
					}
				}
				&.checked {
					&:after {
						position: absolute;
						top: 0;
						left: 0;
						width: 100%;
						text-align: center;
						height: 100%;
						line-height: 35px;
						font-weight: bold;
					}
					&.conf-low:after {
						content: "L";
					}
					&.conf-medium:after {
						content: "M";
					}
					&.conf-high:after {
						content: "H";
					}
				}
			}
		}
	}

	// &:nth-child(even) .confidence-buttons {
	// 	&.conf-low {
	// 		background: desaturate(darken($conf_low, 8), 10);
	// 	}
	// 	&.conf-medium {
	// 		background: desaturate(darken($conf_med, 8), 10);
	// 	}
	// 	&.conf-high {
	// 		background: desaturate(darken($conf_high, 8), 10);
	// 	}
	// }
}

#sentence-tagging .sentence {
	transition: margin-top 0.2s linear;
	margin-top: 0;
	transition: opacity 0.5s ease;
	position: relative;

	&.selected {
		&:before {
			//color: $primary-blue;
		}
		&:after {
			//border-left: 2px solid $primary-blue;
			opacity: 1;
		}
	}
}
#sentence-tagging .no-results-found {
}
#sentence-tagging .sentence .word,
#sentence-tagging .sentence .punctuation {
	background: none;
	position: relative;
	word-wrap: normal;
	display: inline-block;
	margin: 0;
	line-height: 100%;
	vertical-align: top;
	margin-top: 4px;
	border-bottom: 0;
	cursor: url($base_url + "images/pencil.png") 3 13, pointer;

	&.tag {
		background: #fefefe;
	}

	.word-inner {
		padding: 15px 10px;
		display: block;
		box-sizing: border-box;
		min-width: 25px;
		text-align: center;
		position: relative;
		z-index: 10;

		.search-highlight {
			color: darken($button-blue, 12);
			position: relative;

			&:before {
				content: " ";
				position: absolute;
				top: 7px;
				left: -1px;
				width: calc(100% + 2px);
				height: 24px;
				background: rgba($button-blue, 0.15);
			}
		}

		// &::selection {
		// 	background: #eee;
		// 	outline: green solid 3px;
		// }
		&::selection {
			background: rgba(0, 0, 0, 0);
		}

		&.highlighted,
		&:active {
			&:before {
				background: rgba(240, 240, 240, 0.75);
				background-blend-mode: screen;
			}
		}

		&.highlighted,
		&:hover {
			&:after {
				display: block;
			}
		}
		&:before {
			// The background will be stripey when selected
			pointer-events: none;
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			content: " ";
			z-index: -1;
		}

		&:after {
			pointer-events: none;
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			border-bottom: 3px solid #777;
			content: " ";
			display: none;
		}
	}

	&.tag:before {
		border-top: 2px solid rgba(205, 205, 205, 0.75);
		border-bottom: 2px solid rgba(205, 205, 205, 0.75);
	}
	&.tag.tag-begin:before {
		border-left: 2px solid rgba(205, 205, 205, 0.75);
	}
	&.tag.tag-end:before {
		border-right: 2px solid rgba(205, 205, 205, 0.75);
	}

	&.tag-begin {
		z-index: 10;
	}
	&.tag-begin.tag-end .label .label-name {
		position: initial;
	}
	.label {
		display: block;
		font-size: 12px;
		text-align: left;
		width: 100%;
		padding: 12px 5px;
		padding-bottom: 12px;
		padding-left: 20px;
		box-sizing: border-box;
		line-height: 0;
		//border-left: 2px solid rgba(0, 0, 0, 0);
		//border-right: 2px solid rgba(0, 0, 0, 0);
		z-index: 0;
		max-width: 100%;
		cursor: pointer;
		overflow: visible;
		position: relative;

		.label-name {
			max-width: 100%;

			height: 100%;
			position: absolute;
			&::selection {
				background: rgba(0, 0, 0, 0);
			}
		}

		&:after {
			content: attr(data-name);
			position: absolute;
			top: 11px;
			left: 18px;
			width: 0;
			z-index: 100;
		}

		&::selection {
			background: rgba(0, 0, 0, 0);
		}

		&.suggestion {
			//font-style: italic;
			//color: rgba(0, 0, 0, 0.7)
		}
	}

	&:not(.tag-begin) .label {
		font-size: 0;
	}
	&.tag-end .label {
		//text-align: center;
		//width: calc(100% - 2px);
	}

	&.tag-begin .label {
		border-left: 2px solid rgba(0, 0, 0, 0.15);
	}
	&.tag-end .label {
		border-right: 2px solid rgba(0, 0, 0, 0.15);
	}
	&.tag .label:last-child {
		border-bottom: 2px solid rgba(0, 0, 0, 0.15);
	}
	&:not(.selected).tag .label:nth-child(2) {
		border-top: 2px solid rgba(0, 0, 0, 0.15);
	}

	&.selected.tag .label:nth-child(2),
	.word-inner:hover ~ .label:nth-child(2),
	.word-inner.highlighted ~ .label:nth-child(2) {
		border-top: 2px solid rgba(0, 0, 0, 0);
	}

	&.tag-begin .label:before {
		z-index: 1;
		content: "\f00d";
		position: absolute;
		left: 5px;
		top: 11px;
		font-size: 12px;
		color: rgba(0, 0, 0, 0.15);
		font-family: FontAwesome;
		//border-top: 2px solid rgba(0, 0, 0, 0.15);
		z-index: 100;
	}
	&.tag-begin .label {
		cursor: pointer;
	}
	&.tag-begin .label:hover:before {
		color: rgba(0, 0, 0, 0.5);
	}
}

.word-oov-highlight {
	display: none;
	position: absolute;
	bottom: 3px;
	left: 0;
	width: 100%;
	height: 100%;
	pointer-events: none;
}
.render-oov-highlight #sentence-tagging .sentence .word .word-oov-highlight,
#sentence-tagging .sentence .punctuation .word-oov-highlight {
	display: block;
	background: url($base_url + "images/squiggly.png") bottom repeat-x;
	image-rendering: -webkit-optimize-contrast;
	image-rendering: pixelated;
}

#sentence-tagging .sentence .punctuation {
	color: #ccc;
}

/* $color-list: #99FFCC, #FFCCCC, #CCCCFF, #CCFF99, #CCFFCC, #CCFFFF, #FFCC99, #FFCCFF, #FFFF99, #FFFFCC, #CCCC99, #fbafff, #ffbfaf, #c6ffcb;  */

#sentence-tagging span:not(.tag):not(.selected) {
	&.word,
	&.punctuation {
		border-bottom: 1px solid rgba(230, 230, 230, 0.9);
		box-sizing: border-box;
	}
}
#sentence-tagging span.punctuation.selected {
	border-bottom: 1px solid #ccc;
	box-sizing: border-box;
}
#sentence-tagging .sentence .word {
	z-index: 0;
}
#sentence-tagging .sentence .word.tag::before,
#sentence-tagging .sentence .word.selected::before {
	content: " ";
	width: 100%;
	height: 100%;
	top: 0px;
	left: 0px;
	position: absolute;
	z-index: -1;
	//border-top: 2px solid rgba(0, 0, 0, 0.15);
	//border-bottom: 2px solid rgba(0, 0, 0, 0.4);
	font-size: 10px;
	line-height: 125px;
	font-weight: bold;
	text-align: center;
	color: rgba(0, 0, 0, 0.5);
	overflow: hidden;
	box-sizing: border-box;
}

#sentence-tagging .sentence .word.selected .word-inner:after {
	display: block;
	border-bottom: 3px solid #555;
}

#sentence-tagging .sentence .word.selected .word-inner:before {
	//background: #f8f8f8;
	background: rgba(255, 255, 255, 0.7);
	background-blend-mode: multiply;
	background-image: url($base_url + "images/stripes-black-trans-50.png");
	animation: animatedBackgroundA 20s linear infinite;
	content: " ";
}

#sentence-tagging .sentence .word.selected::before {
	visibility: initial;
}

@keyframes animatedBackgroundA {
	from {
		background-position: 0 0;
	}
	to {
		background-position: 200px 0;
	}
}

#sentence-tagging .sentence .word::after {
	content: " ";
	box-sizing: border-box;
	width: 100%;
	height: calc(100% + 2px);
	top: -1px;
	left: 0;
	position: absolute;
	z-index: -1;

	font-size: 10px;
	line-height: 125px;
	font-weight: bold;
	text-align: center;
	color: rgba(0, 0, 0, 0.5);
	overflow: hidden;
	background: none;
	//padding: 0px 2px;
}
#sentence-tagging .sentence .word.tag:not(.selected)::after {
	//background: #eaeaea;
}
#sentence-tagging .sentence .word.selected::after {
	//border: 2px solid rgba(0, 0, 0, 0.15);
	//height: calc(100% - 2px);
}
#sentence-tagging .sentence .word.selected.tag::after {
	top: 1px;
	//height: calc(100% - 2px);
	line-height: 120px;
	border: none;
	//border-bottom: 2px solid #222;
}

#sentence-tagging .sentence {
	position: relative;
}
#sentence-tagging .sentence.selected {
	opacity: 1;
}

#sentence-tagging .sentence:last-child.selected {
	//	&:after {
	//		position: absolute;
	//		top: 140%;
	//		content: "Press (down) to load the next document group.";
	//		text-align: center;
	//		opacity: 0.5;
	//		font-size: 0.8em;
	//		left: 0;
	//		width: 100%;
	//}
}

#sentence-tagging .sentence .word.selected.chain:before {
	content: " ";
	background: #dedede;
	top: 0;
	position: absolute;
	width: 12px;
	height: 100%;
	right: -10px;
}

#feather-overlay {
	position: fixed;
	top: 40px;
	background: linear-gradient(rgba(255, 255, 255, 0.7), rgba(0, 0, 0, 0));
	height: 210px;
	z-index: 100;
	width: 100%;
	display: none;
}
@media (max-width: 1400px) {
	nav#legend {
		display: none;
	}
}
// nav#navbar {
// 	position: fixed;
// 	top: 0px;
// 	width: 100%;
// 	z-index: 1000;
// 	background: #eee;
// 	padding: 15px 0;
// }

// nav#navbar .navbar-left {
// 	position: absolute;
// 	right: 0;
// 	left: 0;
// 	width: 20%;
// 	margin-left: 12px;
// }
#logo {
	font-weight: bold;
}

// nav#navbar .navbar-right {
// 	position: absolute;
// 	right: 0;
// 	top: 0;
// 	margin-top: 5px;
// 	margin-right: 8px;
// 	/*width: 190px;	*/
// }
// nav#navbar .navbar-right input, nav#navbar .navbar-right button {
// 	height: 36px;
// }

button#save-to-file {
	box-sizing: border-box;
	cursor: pointer;
	text-align: center;
	margin-left: 10px;
}

input#jump-to-batch {
	padding-left: 8px;
	width: 135px;
}
button#jump-to-batch-go {
	width: 40px;
	text-align: center;
	cursor: pointer;
}

nav#hotkeys {
	position: fixed;
	bottom: 0;
	left: 0;
	color: #444;
	font-size: 12px;
	padding: 0 70px;
}

/* $color-list: #99FFCC, #FFCCCC, #CCCCFF, #CCFF99, #CCFFCC, #CCFFFF, #FFCC99, #FFCCFF, #FFFF99, #FFFFCC, #CCCC99, #fbafff, #ffbfaf, #c6ffcb;  */

#sentence-counter,
#saving-notification,
#loading-notification,
#ending-notification {
	text-align: center;
	font-size: 16px;
	color: #555;
	width: 100%;
	display: none;
}
#loading-notification {
	display: block;
}

span#group-number {
	font-weight: bold;
}
span#group-total {
	font-weight: bold;
}
span#saving-filename {
	font-weight: bold;
}
#saving-notification {
	display: none;
}
#jump-to-batch-error {
	position: absolute;
	right: 0;
	top: 50px;
	border: 1px solid #936161;
	color: #222;
	width: 100%;
	padding: 6px;
	box-sizing: border-box;
	background: #ffcccc;
	display: none;
}
#jump-to-batch-error:before {
	content: " ";
	top: -11px;
	left: 80px;
	height: 10px;
	position: absolute;
	width: 0;
	height: 0;
	border-style: solid;
	border-width: 0 10px 10px 10px;
	border-color: transparent transparent #936161 transparent;
}
#jump-to-batch-error:after {
	content: " ";
	top: -10px;
	left: 80px;
	height: 10px;
	position: absolute;
	width: 0;
	height: 0;
	border-style: solid;
	border-width: 0 10px 10px 10px;
	border-color: transparent transparent #ffcccc transparent;
}

// span.word::selection, span.word::-webkit-selection {
//   background: lighten($primary-blue, 40); /* WebKit/Blink Browsers */
// }
// span.punctuation::selection, span.punctuation::-webkit-selection {
//   background: lighten($primary-blue, 40); /* WebKit/Blink Browsers */
// }
// span.word::-moz-selection {
//   background: lighten($primary-blue, 40); /* Gecko Browsers */
// }
// span.punctuation::-moz-selection {
//   background: lighten($primary-blue, 40); /* Gecko Browsers */
// }

// span.word.selected::selection, span.word.selected::-webkit-selection {
//   background: rgba(0, 0, 0, 0); /* WebKit/Blink Browsers */
// }
// span.punctuation.selected::selection, span.punctuation.selected::-webkit-selection {
//   background: rgba(0, 0, 0, 0); /* WebKit/Blink Browsers */
// }
// span.word.selected::-moz-selection {
//   background: rgba(0, 0, 0, 0); /* Gecko Browsers */
// }
// span.punctuation.selected::-moz-selection {
//   background: rgba(0, 0, 0, 0); /* Gecko Browsers */
// }

#entity-categories-window.tagging {
	width: 80%;
	left: 10%;
	top: 7%;
	transition: none;
	z-index: 100001;

	.full-width {
		width: 100%;
		padding-top: 70px;
	}
	h3.title-row {
		box-sizing: border-box;
		top: 0;
		padding: 20px;
		background: #eee;
		width: 100%;
	}
	div.button-row {
		width: 100%;
		position: absolute;
		top: 10px;
		left: 0;
		button {
			width: auto;
			float: right;
		}
	}

	#category-tree-explanation {
		position: absolute;
		left: 0;
		width: 300px;
		float: left;
		padding: 40px 20px;
		box-sizing: border-box;
		color: #777;
		padding-top: 15px;

		.inner {
			display: block;

			h4 {
				margin: 0;
				padding: 0;
				width: 100%;
				font-size: 16px;
				color: #666;
			}
			color: #999;
			font-size: 14px;
			padding: 10px 15px;
		}
	}
	.saved-notification {
		font-size: 14px;
		position: absolute;
		top: 70px;
		right: 20px;
		text-align: left;
		.unsaved {
			display: none;
			color: #555;
		}
		.saved {
			display: none;
			color: darken($primary-green, 5);
		}
		.saving {
			display: none;
			color: #ddd;
		}
		.error {
			display: none;
			color: $primary-red;
		}
	}
}

button.blue-button {
	margin: 0 10px;
	border: 2px solid #ddd;
	background: #eee;

	cursor: pointer;
	transition: none;
	&:not(.grey-first) {
		background: $primary-blue;
		border: 2px solid darken($primary-blue, 5);
		color: white;
		&.disabled {
			opacity: 0.2;
			background: #eee;
			border: 2px solid #ddd;
			color: #666;
			pointer-events: none;
		}
	}
	&:hover {
		border: 2px solid lighten($primary-blue, 10);
		background: lighten($primary-blue, 15);
		color: white;
	}
	&:active {
		transform: translate(1px, 1px);
	}
}

#entity-categories-window.tagging ~ * {
	//transition: all 0.2s ease;
}

#entity-categories-window.tagging.show ~ * {
	filter: blur(2px);
	pointer-events: none;
}

#window-mask {
	background: black;
	opacity: 0;
	pointer-events: none;
	z-index: 100000;
	position: fixed;
	top: 0;
	left: 0;
	background-blend-mode: multiply;
	//transition: opacity 0.2s ease;
	width: 100%;
	height: 100%;
}
#entity-categories-window.tagging.show ~ #window-mask {
	opacity: 0.4;
	pointer-events: auto;
}

// .tagging ~ #main-container {

// 	width: 100%;
// 	main {
// 		width: 78%;
// 		margin: 0;
// 		margin-left: 22%;
// 		background: #f6f6f6;
// 		min-height: 80vh;
// 		padding: 0 80px 0 40px;
// 		border-left: 1px solid #ddd;
// 		border-right: 1px solid #ddd;
// 		box-sizing: border-box;
// 	}
// }

#tagging-interface {
	display: flex;
	#sentence-tagging {
		width: 100%;
	}
	&.loading {
		#sentence-tagging .document-container //, #tagging-menu, #pagination > *
		{
			opacity: 0.6;
			pointer-events: none;
		}
	}
	.loading-message {
		position: fixed;
		top: calc(50% - 30px);
		left: 22%;
		width: 78%;
		text-align: center;
		font-size: 32px;
		color: #777;
		z-index: 10000;
		user-select: none;
		i {
			margin-right: 20px;
		}
	}
}

#tagging-menu {
	position: fixed;
	top: $navbar-height + 4px;
	left: 0;
	width: 370px;
	z-index: 990; // Navbar has 1000
	height: calc(100% - 50px);
	background: #fff;
	background-image: url($base_url + "images/stripes-light.png");
	box-shadow: 1px 1px 4px -3px rgba(0, 0, 0, 0.9);
	display: flex;

	flex-direction: column;
	#modify-hierarchy-container {
		padding: 0 20px;
		padding-bottom: 10px;
		button {
			margin: 0;
			width: 100%;
			cursor: pointer;
		}
	}
	input {
		width: 100%;
		margin: 0;
	}
	.category-hierarchy {
		width: 100%;
		padding: 0px;
	}
	.category-tree {
		width: 66.66666%;
		height: 100%;
	}

	#wikipedia-summary-container {
		padding-top: 15px;
		&.hidden {
			display: none;
		}
	}
	.hotkey-info {
		//min-height: 1.5em;
		font-size: 0.8em;
		padding: 0 10px;
		padding-left: 20px;
		color: #555;
		display: none;
		span.chain {
			display: inline-block;
			min-width: 30px;
		}
		&.hidden {
			color: rgba(0, 0, 0, 0);
		}
	}
	.tokens-info {
		padding: 15px;
		background: white;
		border-top: 1px solid #ddd;
		border-bottom: 1px solid #ddd;
		font-size: 0.8em;
		margin-bottom: 0px;
		background: #fefefe;
		padding-bottom: 0;
		padding-top: 0;

		button#wikipedia-hide-show {
			background: none;
			color: #aaa;
			padding: 0;
			width: 100%;
			margin: 0;
			line-height: 12px;
			padding-bottom: 2px;
			border: none;
			height: 20px;
			cursor: pointer;
			position: relative;
			font-size: 0;
			&:hover {
				color: #555;
			}
			&:before {
				position: absolute;
				top: 0px;
				left: 0;
				text-align: center;
				width: 100%;
				content: "\f077";
				font-size: 18px;
				font-family: FontAwesome;
			}
			&.down:before {
				content: "\f078";
			}
			&.down {
				height: $navbar-height;
				line-height: 50px;
			}
		}

		p {
			margin: 0;
		}
		.tokens {
			font-weight: bold;
			font-size: 1.3em;
			margin-bottom: 10px;
		}
		.summary {
			color: #555;
			min-height: 120px;
			font-size: 15px;
			.different {
				color: $primary-blue;
			}
		}
		span.more {
			&.show {
				opacity: 1;
				pointer-events: auto;
			}
			font-size: 0.9em;
			opacity: 0;
			pointer-events: none;
			margin-top: 10px;
			display: block;
			span.left {
				font-style: italic;
				color: #aaa;
			}
			span.right {
				float: right;
				text-align: right;
				i {
					margin-left: 2px;
				}
			}

			a {
				color: $primary-blue;
				text-decoration: none;
				&:hover {
					color: lighten($primary-blue, 5);
					text-decoration: underline;
				}
			}
		}
	}
	.label-search {
		padding: 0px 20px;
	}
}

// .category-hierarchy {
// 	height: 100%;
// }

// #category-hierarchy-tree-no-results {
// 	display: none;
// 	color: #999;
// 	padding: 14px 24px;
// }
a#untag-tokens {
	color: #999;
	padding: 4px 26px;
	display: block;
	margin-top: 4px;
}

.jstree {
	padding: 0 20px;
	ul {
		margin-top: 0;
		padding: 0;
		&.jstree-current li a span {
			//, &.jstree-open .jstree-leaf a span  {
			opacity: 1;
			pointer-events: auto;
		}
		li {
			list-style: none;
			&.jstree-hidden {
				display: none;
			}
			&.jstree-closed > a {
				&:before {
					font-family: FontAwesome;
					display: inline-block;
					content: "\f078";
					margin-right: 7px;
					font-size: 0.7em;
					transform: translate(0, -2px);
				}
			}
			&.jstree-open > a {
				&:before {
					font-family: FontAwesome;
					display: inline-block;
					content: "\f077";
					margin-right: 7px;
					font-size: 0.7em;
					transform: translate(0, -2px);
				}
			}
			// &.jstree-closed ~ li a span {
			// 	display: block;
			// }
			// &.jstree-open ~ li.jstree-anchor a span, &.jstree-open + li.jstree-anchor a span  {
			//  	display: none;
			// }
			&#remove-label > a {
				border-left: 4px solid rgba(0, 0, 0, 0);
				// &:before {
				// 	font-family: FontAwesome;
				// 	display: inline;
				// 	content: "\f068";
				// 	margin-right: 7px;
				// 	font-size: 0.9em;
				// }
				&:hover {
					background: #e2e2e2;
				}
			}

			a:focus {
				outline: none;
			}
			a {
				color: #999;
				display: block;
				padding: 4px 6px;
				&.jstree-clicked {
					background: #e2e2e2;
					color: #222;
					outline: none;
					padding: 4px 6px;
					span {
						border-color: #222;
					}
				}
				span,
				&.backspace-hotkey::after {
					float: right;
					font-size: 0.6em;
					margin-top: 4px;
					border: 1px solid #bbb;
					padding: 0 4px;
					border-radius: 2px;
					text-align: center;
					min-width: 1.1em;
					//transition: opacity 0.2s ease;
					opacity: 0;
					pointer-events: none;
					background: #fafafa;
				}
				span.no-label {
					opacity: 1;
					pointer-events: auto;
				}
				span.hide {
					display: none;
				}
				&.backspace-hotkey:after {
					content: "\f177";
					font-family: FontAwesome;
					opacity: 1;
					padding: 3px 4px;
				}
				&.backspace-hotkey span {
					display: none;
				}
			}
			a:hover {
				color: #222;
				span {
					border-color: #222;
				}
			}
			ul {
				padding-left: 25px;
			}
			.jstree-search {
				color: #444;
			}
		}
	}

	a {
		color: #333;
		text-decoration: none;
	}
	&.searching a span,
	&.searching a.backspace-hotkey::after {
		display: none;
	}
}

#category-hierarchy-tree.searching {
	display: none;
}
.category-hierarchy .label-search {
	position: relative;
	.search-container {
		display: flex;
	}
	p {
		span#search-results-info,
		#search-results-none {
			display: none;
		}

		color: #777;
		margin: 2px 0;
		margin-top: 6px;
		margin-bottom: -3px;
		font-size: 0.8em;
		&.filtered {
			display: none;
		}
		&.initial {
			text-align: center;
		}
		a {
			cursor: pointer;
			display: inline-block;
			margin-top: -1px;
			float: right;
			text-decoration: none;
			color: $primary-blue;
			padding: 0 3px;
			border: 1px solid rgba(0, 0, 0, 0);
			&:hover {
				color: white;
				border: 1px solid $primary-blue;
				background: lighten($primary-blue, 5);
				border-radius: 2px;
			}
			span.esc {
				font-size: 0.8em;
				display: inline-block;
				transform: translate(0, -1px);
			}
		}
	}

	input {
		width: auto;
	}
	&.searching {
		p.initial {
			display: none;
		}
		p.filtered {
			display: block;
		}
		input {
			width: 80%;
		}
		button {
			width: 20%;
			padding: 5px 10px;
			border: 2px solid #ccc;
		}
	}
	&:not(.searching):after {
		content: attr(data-content);
		position: absolute;
		right: 26px;
		top: 12px;
		font-size: 0.6em;
		margin-top: 4px;
		border: 1px solid #bbb;
		padding: 0 4px;
		border-radius: 2px;
		text-align: center;
		min-width: 1.1em;
		//transition: opacity 0.2s ease;
		pointer-events: none;
		background: #fafafa;
	}
	// .button-container {
	// 	margin-top: 10px;
	// 	align-items: left;
	// 	justify-content: center;
	// 	display: none;
	// 	width: 70%;
	// 	margin-left: 30%;
	// }
	// &.searching .button-container {
	// 	display: flex;
	// }

	button {
		overflow: hidden;
		margin: 0;
		width: 0;
		font-size: 0.9em;
		background: #f2f2f2;
		border: none;
		cursor: pointer;
		transition: none;
		padding: 5px 0px;
		&:hover {
			border: 2px solid $primary-orange;
			background: lighten($primary-orange, 8);
			color: white;
		}
	}
}

// #tagging-progress-bar-background {
// 	background: #444;
// 	position: fixed;
// 	top: $navbar-height;
// 	right: 0;
// 	width: 15%;
// 	padding: 0 9px;
// 	padding-right: 27px;
// 	height: $tagging-progress-bar-height;
// 	z-index: 995; // Navbar has 1000

// 	&:before {
// 		position: absolute;
// 		top: 0;
// 		left: -70px;
// 		background: url($base_url + 'images/corner.png');
// 		background-size: 100% 100%;
// 		width: 70px;//$tagging-progress-bar-height;
// 		height: $tagging-progress-bar-height;
// 		content: " ";
// 	}

// 	#tagging-project-title {
// 		color: white;
// 		font-size: 15px;
// 		font-weight: bold;
// 		margin: 0;
// 		margin-top: 1px;
// 		display: block;
// 		text-align: center;
// 	}

// 	#tagging-progress-bar {
// 		max-width: 100%;
// 		margin: 0 auto;
// 		width: 100%;
// 		margin-top: 5px;

// 		height: 18px;
// 		display: block;
// 	}
// 	span.progress-bar {
// 		height: 100%;
// 		background: #666;
// 		display: block;
// 		.inner {
// 			height: 100%;
// 			display: block;
// 			background: linear-gradient(lighten($primary-green, 5), lighten($primary-green, 1));
// 		}
// 		.progress-text {
// 			font-size: 14px;
// 			margin-top: -4px;

// 		}
// 	}
// }

#tagging-progress-bar {
	max-width: 70%;
	margin: 0 auto;

	margin-top: -5px;
	position: relative;
	height: 12px;
	display: block;
	opacity: 1;
	transition: opacity 0.3s ease;
	&.hide {
		opacity: 0;
	}
	position: absolute;
	top: 39px;
	left: 17.5%;
	width: 100%;
	pointer-events: none;
	span.progress-bar {
		width: 100%;
		height: 100%;
		background: #ddd;
		display: block;
		position: absolute !important;
		top: 0;
		left: 0;

		.inner {
			height: 100%;
			display: block;
			position: absolute !important;
			top: 0;
			left: 0;
			background: linear-gradient(
				lighten($primary-green, 5),
				lighten($primary-green, 1)
			) !important;
		}
		.progress-text {
			font-size: 14px;
			margin-top: -4px;
		}
	}
}

.drag-line {
	border: none !important;
	border-top: 2px solid #ccc !important;
	background: rgba(255, 255, 255, 0.7) !important;
	height: 32px !important;
	outline: none !important;
}

.draggable-list {
	list-style: none;
	width: 100%;
	padding: 0;
	&.dragging {
		background: rgba(52, 168, 235, 0.1);
	}

	.draggable {
		user-select: "none";
		padding: 10px;
		margin: 0 0 10px 0;
		&.dragging {
			background: #ccc;
		}
	}
}
